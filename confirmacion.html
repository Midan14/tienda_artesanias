<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedido Confirmado - Artesanías Ancestrales</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .confirmacion-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            margin-top: 100px;
        }

        .confirmacion-card {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .success-icon {
            font-size: 80px;
            color: #28a745;
            margin-bottom: 20px;
        }

        .confirmacion-title {
            color: #8B4513;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .confirmacion-subtitle {
            color: #666;
            font-size: 16px;
            margin-bottom: 30px;
        }

        .pedido-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            text-align: left;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            color: #333;
        }

        .info-value {
            color: #666;
        }

        .numero-pedido {
            font-size: 24px;
            font-weight: bold;
            color: #8B4513;
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border: 2px dashed #D2691E;
            margin: 20px 0;
        }

        .estado-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .estado-pendiente {
            background: #fff3cd;
            color: #856404;
        }

        .estado-confirmado {
            background: #d4edda;
            color: #155724;
        }

        .next-steps {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin: 30px 0;
            border-radius: 5px;
        }

        .next-steps h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        .next-steps ul {
            margin: 0;
            padding-left: 20px;
        }

        .next-steps li {
            margin-bottom: 8px;
            color: #666;
        }

        .payment-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .payment-info h4 {
            color: #856404;
            margin-bottom: 15px;
        }

        .banco-datos {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
        }

        .banco-datos .dato {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn-action {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s;
        }

        .btn-action:hover {
            transform: translateY(-2px);
        }

        .btn-primary {
            background: linear-gradient(135deg, #D2691E 0%, #8B4513 100%);
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .contact-info {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
        }

        .contact-info h4 {
            color: #8B4513;
            margin-bottom: 15px;
        }

        .contact-methods {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .contact-method {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .confirmacion-container {
                padding: 10px;
                margin-top: 80px;
            }

            .confirmacion-card {
                padding: 20px;
            }

            .confirmacion-title {
                font-size: 24px;
            }

            .numero-pedido {
                font-size: 20px;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn-action {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }

            .contact-methods {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <div class="logo-container">
                <a href="index.html">
                    <img src="img/Imagen2.png" alt="Logo" width="100" class="logo">
                </a>
            </div>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html"><i class="fas fa-home"></i> Inicio</a></li>
                    <li><a href="productos.html"><i class="fas fa-store"></i> Productos</a></li>
                </ul>
            </nav>
            
            <div class="header-icons">
                <a href="cuenta.html" class="icon-link" aria-label="Mi cuenta">
                    <i class="fas fa-user"></i>
                </a>
                <a href="carrito.html" class="icon-link" aria-label="Carrito de compras">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="badge" id="cart-counter">0</span>
                </a>
            </div>
        </div>
    </header>

    <main class="confirmacion-container">
        <div class="confirmacion-card">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            
            <h1 class="confirmacion-title">¡Pedido Confirmado!</h1>
            <p class="confirmacion-subtitle">Tu pedido ha sido recibido y está siendo procesado</p>
            
            <div class="numero-pedido" id="numero-pedido">
                <!-- Se llenará dinámicamente -->
            </div>

            <div class="pedido-info" id="pedido-info">
                <!-- Se llenará dinámicamente -->
            </div>

            <div class="next-steps">
                <h3><i class="fas fa-list-check"></i> Próximos Pasos</h3>
                <ul>
                    <li>Recibirás un email de confirmación en los próximos minutos</li>
                    <li>Te notificaremos cuando tu pedido sea preparado para envío</li>
                    <li>Podrás hacer seguimiento de tu pedido en tu cuenta</li>
                    <li>El tiempo estimado de entrega es de 3-5 días hábiles</li>
                </ul>
            </div>

            <div id="payment-instructions" style="display: none;">
                <!-- Instrucciones de pago específicas según el método -->
            </div>

            <div class="action-buttons">
                <a href="cuenta.html" class="btn-action btn-primary">
                    <i class="fas fa-user"></i> Ver Mis Pedidos
                </a>
                <a href="index.html" class="btn-action btn-secondary">
                    <i class="fas fa-home"></i> Volver al Inicio
                </a>
                <a href="productos.html" class="btn-action btn-success">
                    <i class="fas fa-shopping-bag"></i> Seguir Comprando
                </a>
            </div>

            <div class="contact-info">
                <h4>¿Necesitas ayuda?</h4>
                <div class="contact-methods">
                    <div class="contact-method">
                        <i class="fas fa-envelope"></i>
                        <span>info@artesaniasancestrales.com</span>
                    </div>
                    <div class="contact-method">
                        <i class="fas fa-phone"></i>
                        <span>+57 1 234 5678</span>
                    </div>
                    <div class="contact-method">
                        <i class="fas fa-whatsapp"></i>
                        <span>+57 300 123 4567</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/carrito.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            cargarDetallesPedido();
        });

        function cargarDetallesPedido() {
            // Obtener datos del último pedido
            const ultimoPedido = localStorage.getItem('ultimoPedido');
            
            if (!ultimoPedido) {
                // Si no hay datos del pedido, redirigir al inicio
                window.location.href = 'index.html';
                return;
            }

            try {
                const pedido = JSON.parse(ultimoPedido);
                mostrarDetallesPedido(pedido);
                
                // Limpiar los datos después de mostrarlos
                localStorage.removeItem('ultimoPedido');
                
            } catch (error) {
                console.error('Error cargando detalles del pedido:', error);
                window.location.href = 'index.html';
            }
        }

        function mostrarDetallesPedido(pedido) {
            // Mostrar número de pedido
            document.getElementById('numero-pedido').innerHTML = `
                <i class="fas fa-receipt"></i> Pedido #${pedido.numeroPedido}
            `;

            // Mostrar información del pedido
            const pedidoInfo = document.getElementById('pedido-info');
            pedidoInfo.innerHTML = `
                <div class="info-row">
                    <span class="info-label">Estado:</span>
                    <span class="estado-badge estado-${pedido.estado}">${pedido.estado.toUpperCase()}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Total:</span>
                    <span class="info-value">$${pedido.total.toLocaleString()}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Método de Pago:</span>
                    <span class="info-value">${obtenerNombreMetodoPago(pedido.metodoPago)}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Fecha:</span>
                    <span class="info-value">${new Date(pedido.fechaCreacion).toLocaleDateString('es-CO')}</span>
                </div>
            `;

            // Mostrar instrucciones específicas según el método de pago
            mostrarInstruccionesPago(pedido.metodoPago);
        }

        function obtenerNombreMetodoPago(metodo) {
            const nombres = {
                'tarjeta': 'Tarjeta de Crédito/Débito',
                'pse': 'PSE (Pagos Seguros en Línea)',
                'transferencia': 'Transferencia Bancaria',
                'contraentrega': 'Pago Contra Entrega'
            };
            return nombres[metodo] || metodo;
        }

        function mostrarInstruccionesPago(metodoPago) {
            const paymentInstructions = document.getElementById('payment-instructions');
            
            if (metodoPago === 'transferencia') {
                paymentInstructions.innerHTML = `
                    <div class="payment-info">
                        <h4><i class="fas fa-university"></i> Instrucciones para Transferencia Bancaria</h4>
                        <p>Para completar tu pedido, realiza la transferencia a la siguiente cuenta:</p>
                        <div class="banco-datos">
                            <div class="dato">
                                <strong>Banco:</strong>
                                <span>Banco Ejemplo</span>
                            </div>
                            <div class="dato">
                                <strong>Tipo de Cuenta:</strong>
                                <span>Ahorros</span>
                            </div>
                            <div class="dato">
                                <strong>Número de Cuenta:</strong>
                                <span>1234567890</span>
                            </div>
                            <div class="dato">
                                <strong>Titular:</strong>
                                <span>Artesanías Ancestrales SAS</span>
                            </div>
                            <div class="dato">
                                <strong>NIT:</strong>
                                <span>123.456.789-0</span>
                            </div>
                        </div>
                        <p><strong>Importante:</strong> Envía el comprobante de pago por WhatsApp al +57 300 123 4567 junto con tu número de pedido.</p>
                    </div>
                `;
                paymentInstructions.style.display = 'block';
            } else if (metodoPago === 'contraentrega') {
                paymentInstructions.innerHTML = `
                    <div class="payment-info">
                        <h4><i class="fas fa-truck"></i> Pago Contra Entrega</h4>
                        <p>Tu pedido será enviado y podrás pagar cuando lo recibas.</p>
                        <p><strong>Importante:</strong> Ten listo el dinero exacto: $${document.querySelector('.info-value').textContent}</p>
                    </div>
                `;
                paymentInstructions.style.display = 'block';
            } else if (metodoPago === 'pse') {
                paymentInstructions.innerHTML = `
                    <div class="payment-info">
                        <h4><i class="fas fa-university"></i> Pago PSE</h4>
                        <p>Se te enviará un enlace por email para completar el pago a través de tu banco.</p>
                        <p>Revisa tu bandeja de entrada y spam.</p>
                    </div>
                `;
                paymentInstructions.style.display = 'block';
            }
        }
    </script>
</body>
</html>
